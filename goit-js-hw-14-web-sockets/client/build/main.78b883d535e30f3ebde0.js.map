{"version":3,"sources":["webpack:///./index.js"],"names":["name","refs","nametag","document","querySelector","userName","editor","feed","socket","io","prompt","appendMessageToFeed","_ref","message","insertAdjacentHTML","on","chatHistory","markup","map","entry","join","addEventListener","e","preventDefault","form","currentTarget","input","elements","value","trim","alert","payload","emit","reset"],"mappings":"6KA+C6BA,uBA5CvBC,aAAO,CACXC,QAASC,SAASC,cAAc,YAChCC,SAAUF,SAASC,cAAc,eACjCE,OAAQH,SAASC,cAAc,mBAC/BG,KAAMJ,SAASC,cAAc,mBAGzBI,EAASC,IAAG,uBACZJ,EAAWK,OAAO,YAAa,KAAO,YA2C5C,SAASC,EAATC,GAAoD,IAArBP,EAAqBO,EAArBP,SAAUQ,EAAWD,EAAXC,QACvCZ,EAAKM,KAAKO,mBACR,YADF,UAEYT,EAFZ,SAE6BQ,EAF7B,SAR2Bb,EAlCTK,EAmClBJ,EAAKC,QAAQY,mBACX,aADF,+CAEiDd,EAFjD,eAjCFQ,EAAOO,GAAG,YAAa,SAAAC,GACrB,IAAMC,EAASD,EACZE,IAAI,SAAAC,GAAK,gBAAcA,EAAMd,SAApB,SAAqCc,EAAMN,QAA3C,UACTO,KAAK,IAERnB,EAAKM,KAAKO,mBAAmB,YAAaG,KAG5CT,EAAOO,GAAG,eAAgBJ,GAC1BV,EAAKK,OAAOe,iBAAiB,SAE7B,SAA6BC,GAC3BA,EAAEC,iBAEF,IAAMC,EAAOF,EAAEG,cACTC,EAAQF,EAAKG,SAASd,QAE5B,GAA2B,KAAvBa,EAAME,MAAMC,OAEd,YADAC,MAAM,8BAIR,IAAMC,EAAU,CACd1B,WACAQ,QAASa,EAAME,OAGjBpB,EAAOwB,KAAK,eAAgBD,GAC5BpB,EAAoBoB,GACpBP,EAAKS","file":"main.78b883d535e30f3ebde0.js","sourcesContent":["import io from 'socket.io-client';\nimport './styles.css';\n\nconst refs = {\n  nametag: document.querySelector('.nametag'),\n  userName: document.querySelector('.user__name'),\n  editor: document.querySelector('.message-editor'),\n  feed: document.querySelector('.message-feed'),\n};\n\nconst socket = io('ws://localhost:3000');\nconst userName = prompt('Username?', '') || 'Anonymous';\n\nappendJoinedMessage(userName);\n\nsocket.on('connected', chatHistory => {\n  const markup = chatHistory\n    .map(entry => `<li><b>${entry.userName}</b>: ${entry.message}</li>`)\n    .join('');\n\n  refs.feed.insertAdjacentHTML('beforeend', markup);\n});\n\nsocket.on('chat-message', appendMessageToFeed);\nrefs.editor.addEventListener('submit', editorSubmitHandler);\n\nfunction editorSubmitHandler(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  const input = form.elements.message;\n\n  if (input.value.trim() === '') {\n    alert('Введи сообщение, животное!');\n    return;\n  }\n\n  const payload = {\n    userName,\n    message: input.value,\n  };\n\n  socket.emit('chat-message', payload);\n  appendMessageToFeed(payload);\n  form.reset();\n}\n\nfunction appendJoinedMessage(name) {\n  refs.nametag.insertAdjacentHTML(\n    'afterbegin',\n    `<span>Joined chat as <b class ='user__name'>${name}</b></span>`,\n  );\n}\n\nfunction appendMessageToFeed({ userName, message }) {\n  refs.feed.insertAdjacentHTML(\n    'beforeend',\n    `<li><b>${userName}</b>: ${message}</li>`,\n  );\n}\n"],"sourceRoot":""}